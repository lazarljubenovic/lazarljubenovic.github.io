!function(){"use strict";function t(t,n){const e=Object.keys(n);for(const i of e){const e=n[i];void 0!==e&&(t[i]=e)}return t}function n(t,n){const e=t%n;return e<n/2?t-e:t+(n-e)}var e=1e-6;function i(t,n){return Math.abs(t-n)<e}function s(t,n){return!i(t,n)}function r(t,n){return t<n&&s(t,n)}function h(t,n){return t>n&&s(t,n)}function o(t,n){return t<n||i(t,n)}function u(t){return i(0,t)}function c(t){return h(t,0)}function l(t){return r(t,0)}function a(t){return function(...n){for(let e=0;e<n.length-1;e++){const i=n[e],s=n[e+1];if(!t(i,s))return!1}return!0}}const f=a(i),w=a(r),d=a(h),g=a(o),b=a(function(t,n){return t>n||i(t,n)}),p=(...t)=>t.every(u),F=(...t)=>t.every(c),v=(...t)=>t.every(l);function y(t,n){return{x:t,y:n}}function m(t){return t.x}function M(t){return t.y}function D(t){return y(t.x,t.y)}function x(...t){return f(...t.map(m))&&f(...t.map(M))}function A(t,n){return{x:t*Math.cos(n),y:t*Math.sin(n)}}function O(...t){let n=0,e=0;for(const i of t)n+=i.x,e+=i.y;return{x:n,y:e}}const C=O;function k(t){return{x:-t.x,y:-t.y}}function E(t,...n){const e=k(O(...n));return O(t,e)}function S(t,n){return{x:t*n.x,y:t*n.y}}function B(t,n){return S(n/V(t),t)}function T(t,n,e){return O(B(E(n,t),e),t)}function L(t,n){return t.x*n.x+t.y*n.y}function P(t,n){const e=t.x-n.x,i=t.y-n.y;return Math.hypot(e,i)}function V(t){const{x:n,y:e}=t;return Math.hypot(n,e)}function j(t,e){return{x:n(t.x,e),y:n(t.y,e)}}function G(t,n){let e=0,i=P(t,n[0]);for(let s=1;s<n.length;s++){let r=P(t,n[s]);r<i&&(i=r,e=s)}return{index:e,t:n[e],i}}function $(t,n){return t.x*n.y-t.y*n.x}function I(t){return{x:-t.y,y:t.x}}function R(t,n){const e=Math.sin(n),i=Math.cos(n);return{x:t.x*i+t.y*e,y:-t.x*e+t.y*i}}function z(t,n,e){return O(R(E(t,e),n),e)}var U=Object.freeze({s:y,x:m,y:M,clone:D,h:x,o:A,add:O,translate:C,u:function(...t){let n=0,e=0;for(const i of t)"number"==typeof i?n+=i:(n+=i.x,e+=i.y);return{x:n,y:e}},l:function(...t){let n=0,e=0;for(const i of t)"number"==typeof i?e+=i:(n+=i.x,e+=i.y);return{x:n,y:e}},g:k,sub:E,p:S,F:B,v:T,m:L,M:P,D:V,A:function(t){const{x:n,y:e}=t;return Math.atan2(e,n)},O:j,C:G,k:$,S:I,B:function(t,n){return O(n,I(E(t,n)))},rotate:R,T:z,toString:function(t){return`(${t.x}, ${t.y})`}});var H=Object.freeze({L:function(t,n=5){let e=t[0].x,i=t[0].y,s=t[0].x,r=t[0].y;for(let n=1;n<t.length;n++)t[n].x<e&&(e=t[n].x),t[n].x>s&&(s=t[n].x),t[n].y<i&&(i=t[n].y),t[n].y>r&&(r=t[n].y);return{P:e-n,V:i-n,j:s+n,G:r+n}},$:function({x:t,y:n},{P:e,V:i,j:s,G:r}){return g(e,t)&&g(t,s)&&g(i,n)&&g(n,r)},I:function(t,n){return{top:y(t.x,n.V),bottom:y(t.x,n.G),left:y(n.P,t.y),right:y(n.j,t.y)}}});function N(t,n){return{a:n.y-t.y,b:t.x-n.x,c:n.x*t.y-t.x*n.y}}function W({x:t,y:n},{a:e,b:i,c:s}){return e*t+i*n+s}function X(t,n,e){if(x(t,e))return 2;if(x(n,e))return 4;if(s(t.x,n.x)){if(w(t.x,e.x,n.x))return 1;if(d(t.x,e.x,n.x))return 1}else{if(g(t.y,e.y,n.y))return 1;if(b(t.y,e.y,n.y))return 1}return 0}var Y=Object.freeze({R:function(t){const n=[];return 1&t&&n.push("Parallel"),2&t&&n.push("Collinear"),4&t&&n.push("U1"),8&t&&n.push("U2"),16&t&&n.push("V1"),32&t&&n.push("V2"),64&t&&n.push("DegenerateU"),128&t&&n.push("DegenerateV"),n.join(" ")},U:function(t,n,e,i){if(x(t,n)||x(e,i))return 0;const s=N(t,n),r=W(e,s),h=W(i,s);if(F(r,h)||v(r,h))return 0;const o=N(e,i),u=W(t,o),c=W(n,o);return F(u,c)||v(u,c)?1:f(s.a*o.b,o.a*s.b)?2:1},H:function(t,n,e,i){const s=E(n,t),r=E(i,e),h=E(t,e),o=$(s,r);if(u(o)){if(!p($(s,h),$(r,h)))return{type:0,flags:1};const o=L(s,s),c=L(r,r);if(p(o,c))return x(t,e)?{type:1,t:D(t),flags:254}:{type:0,flags:194};if(u(o)){const n=X(e,i,t);let s=64;return 0==n?{type:0,flags:s}:(s|=14,2==n&&(s|=16),4==n&&(s|=32),{type:1,t:D(t),flags:s})}if(u(c)){const i=X(t,n,e);let s=128;return 0==i?{type:0,flags:s}:(s|=50,2==i&&(s|=4),4==i&&(s|=8),{type:1,t:D(e),flags:s})}let l,a;const b=E(n,e);let F=3;u(r.x)?(l=h.y/r.y,a=b.y/r.y):(l=h.x/r.x,a=b.x/r.x);let v=!1;return d(l,a)&&([l,a]=[a,l],v=!0),d(l,1)||w(a,0)?{type:0,flags:3}:(g(0,l,1)&&(F|=v?8:4),g(0,a,1)&&(F|=v?4:8),l=w(l,0)?0:l,a=d(a,1)?1:a,(f(l,0)||f(a,0))&&(F|=16),(f(l,1)||f(a,1))&&(F|=32),f(l,a)?{type:1,t:O(e,S(l,r)),flags:F}:{type:2,N:O(e,S(l,r)),W:O(e,S(a,r)),flags:F})}const c=$(r,h)/o;if(w(c,0)||d(c,1))return{type:0,flags:0};const l=$(s,h)/o;if(w(l,0)||d(l,1))return{type:0,flags:0};const a=O(t,S(c,s));let b=0;return x(a,t)&&(b|=4),x(a,n)&&(b|=8),x(a,e)&&(b|=16),x(a,i)&&(b|=32),{type:1,t:a,flags:b}}});function q(t,n,e,i,s,h,c,l,a,f,w,d){const g=E(t,c),b=$(l,n);if(u(b))return null;const p=$(g,n),F=$(g,l)/b,v=p/b,y=h?o:r,m=f?o:r,M=d?o:r;return(i?o:r)(e,F)&&y(F,s)&&m(a,v)&&M(v,w)?O(t,S(F,n)):null}function Q(t,n,e,i,s){return q(t,E(n,t),0,s,1,s,e,E(i,e),0,s,1,s)}function J(t,n,e,i,s){return q(t,n,0,s,1/0,!1,e,E(i,e),0,s,1,s)}var K=Object.freeze({X:q,Y:Q,q:function(t,n,e,i){return Q(t,n,e,i,!0)},J:function(t,n,e,i){return Q(t,n,e,i,!1)},K:J,Z:function(t,n,e,i){return J(t,n,e,i,!0)},_:function(t,n,e,i){return J(t,n,e,i,!1)}});var Z=Object.freeze({tt:function(t){return 180*t/Math.PI},nt:function(t){return t*Math.PI/180}});var _=Object.freeze({et:function(t,n,e){const i=E(n,t);return O(t,B(i,L(i,E(e,t))/P(n,t)))},it:function(t,n,e,i,s){const r=E(i,t),h=L(e,r);if(h<=0)return null;const o=V(e),u=h/o,c=V(r)**2-u**2,l=(n+s)**2;if(c>=l)return null;const a=l-c,f=u-Math.sqrt(a);return f>o?null:O(t,B(e,f))}}),tt=Object.freeze({st:U,rt:H,ht:Y,ot:K,ut:Z,ct:_});const nt=t=>-t,et=t=>n=>n+t,it=t=>n=>n-t,st=t=>n=>n*t,rt=t=>n=>n/t,ht=Math.round;class ot{constructor(t,n){this.lt=[],this.at=[],this.ft=t,null!=n&&this.wt(n)}wt(t){if(null!=this.dt)throw new Error("Input already exists");return this.dt=t,this.dt.addEventListener("input",()=>{this.set(this.dt.valueAsNumber)}),this.dt.valueAsNumber=this.value,this}set(t){return this.ft="number"==typeof t?t:t(this.ft),null!=this.dt&&(this.dt.valueAsNumber=this.value),this.gt(),this}valueOf(){return this.ft}get value(){return this.valueOf()}subscribe(t){return this.at.push(t),{unsubscribe:()=>{this.unsubscribe(t)}}}unsubscribe(t){const n=this.at.indexOf(t);return this.at.splice(n),this}bt(){this.at=[],this.lt.forEach(t=>t.unsubscribe()),this.lt=[]}gt(){this.at.forEach(t=>t(this.value))}pt(t){const n=new ot(this.value);return this.subscribe(e=>n.set(t(e))),n}Ft(t,n){const e=new ot(n(t.valueOf())(this.value));return"number"==typeof t?this.subscribe(i=>e.set(n(t)(i))):t.subscribe(t=>{e.set(n(t)(e.value))}),e}g(){return this.pt(nt)}round(){return this.pt(ht)}add(t){return this.Ft(t,et)}sub(t){return this.Ft(t,it)}vt(t){return this.Ft(t,st)}yt(t){return this.Ft(t,rt)}}class ut{Mt(t){return this.Dt=t,this}xt(){if(null==this.Dt)throw new Error("Object not added to scene.");return this.Dt}}class ct extends ut{constructor(t,n){if(super(),this.At=[],this.attributes={},void 0===n){const n=t;this.Ot=n.x.valueOf(),this.Ct=n.y.valueOf()}else{const e=t,i=n;"number"!=typeof e&&e.subscribe(()=>this.xt().kt()),"number"!=typeof i&&i.subscribe(()=>this.xt().kt()),this.Ot=e,this.Ct=i}}get Et(){const t=y(this.Ot.valueOf(),this.Ct.valueOf());return this.At.reduce((t,n)=>n(t),t)}get x(){return this.Et.x}get y(){return this.Et.y}set(t){return this.Ot instanceof ot?this.Ot.set(t.x):this.Ot=t.x,this.Ct instanceof ot?this.Ct.set(t.y):this.Ct=t.y,this}St(){return t(this.xt().Bt(),this.attributes)}Tt(t){const n=this.St();if(!n.Lt)return this;const e=this.xt().Pt,i=this.Ot.valueOf()+e,s=this.Ct.valueOf()+e;if(t.save(),t.fillStyle=n.stroke,t.beginPath(),t.arc(i,s,n.size,0,2*Math.PI),""!=n.label){t.font='italic 12pt "Computer Modern", serif',t.textAlign="center",t.textBaseline="middle",t.strokeStyle="white",t.lineWidth=2;const e=n.size+10,r=e*Math.cos(n.Vt),h=e*Math.sin(n.Vt);t.strokeText(n.label,i+r,s+h),t.fillText(n.label,i+r,s+h)}return t.fill(),t.restore(),this}u(t){return t instanceof ot&&t.subscribe(()=>this.xt().kt()),this.At.push(n=>y(n.x+t.valueOf(),n.y)),this}stroke(t){return this.attributes.stroke=t,this}fill(t){return this.attributes.fill=t,this}color(t){return this.stroke(t).fill(t)}size(t){return this.attributes.size=t,this}label(t){return this.attributes.label=t,this}Vt(t){return this.attributes.Vt=t,this}jt(){return this.Vt(3*Math.PI/2)}Gt(){return this.Vt(Math.PI)}$t(){return this.Vt(0)}It(){return this.Vt(Math.PI/2)}Rt(){return this.Vt(5*Math.PI/4)}zt(){return this.Vt(7*Math.PI/4)}Ut(){return this.Vt(3*Math.PI/4)}Ht(){return this.Vt(Math.PI/4)}visible(t=!0){return this.attributes.Lt=t,this}Nt(){return this.visible(!1)}Wt(){return this.visible(!this.attributes.Lt)}lock(t=!0){return this.attributes.Xt=t,this}unlock(){return this.lock(!1)}Yt(){return this.lock(!this.attributes.Xt)}}class lt{constructor(t){this.qt=t,this.Qt=[],this.Jt=[()=>[]],this.Kt=null,this.Zt=!1,this._t=!0,this.tn=0,this.nn=0,this.en=20,this.in="rgba(0, 116, 217, .2)",this.sn=!0,this.rn=0,this.hn=[],this.on=(t=>{const n={x:t.offsetX,y:t.offsetY};if(this.Zt&&null!=this.Kt)this.un(n),this.kt();else{this.cn(n)&&this.kt()}}),this.ln=(t=>{this.Zt=!0}),this.an=(t=>{this.Zt&&this.kt(),this.Zt=!1}),this.fn={stroke:"#111111",fill:"#111111",size:2,label:"",Vt:0,Lt:!0,Xt:!1},this.wn={stroke:"#111111",width:1,strokeStyle:0,Lt:!0},this.dn={stroke:"#111111",width:1,strokeStyle:0,label:"",Vt:Math.PI/2,gn:0,bn:.5,Lt:!0,pn:!1},this.Fn={fill:"rgba(0, 0, 0, .2)",fillStyle:0},this.vn={stroke:"rgba(0, 0, 0)",fill:"transparent",strokeStyle:0,Lt:!0,yn:0,arcTo:2*Math.PI,width:1},this.mn()}get points(){return this.Qt.filter((t=ct,function(n){return n instanceof t}));var t}get Mn(){return this._t}get Dn(){return this.tn}get xn(){return this.nn}get An(){return this.en}get On(){return this.in}get Cn(){return this.sn}get Pt(){return this.rn}kn(t,n){return this.qt.canvas.width=t,this.qt.canvas.height=n,this}En(){return this.qt.canvas.width}Sn(){return this.qt.canvas.height}Bn(){const t=this.En(),n=this.Sn();return[y(0,0),y(0,n),y(t,n),y(t,0)]}clear(){const t=this.En(),n=this.Sn();return this.qt.clearRect(0,0,t,n),this}Tn(){this.qt.save();const t=this.En(),n=this.Sn(),e=this.An;this.qt.strokeStyle=this.On;const i=this.Pt;for(let s=this.Dn;s<=t;s+=e)this.qt.beginPath(),this.qt.moveTo(s+i,0),this.qt.lineTo(s+i,n),this.qt.stroke();for(let s=this.xn;s<=n;s+=e)this.qt.beginPath(),this.qt.moveTo(0,s+i),this.qt.lineTo(t,s+i),this.qt.stroke();return this.qt.restore(),this}Ln(){const t=this.Pt;return this.Qt.forEach(n=>{if(this.Kt==n){this.qt.save();const{x:n,y:e}=this.Kt.Et;this.qt.beginPath(),this.qt.fillStyle=this.Kt.St().stroke+"BB",this.qt.arc(n.valueOf()+t,e.valueOf()+t,10,0,2*Math.PI,!1),this.qt.fill(),this.qt.restore()}n.Tt(this.qt)}),this}Pn(){const t=this.Jt.map(t=>t());for(const n of t)for(const t of n)t.Mt(this),t.Tt(this.qt);return this}Vn(){return this._t&&this.Tn(),this.Ln().Pn(),this}kt(){return this.clear(),this.hn.forEach(t=>t()),this.Vn(),this}add(...t){return this.jn(...t),t.forEach(t=>t.Mt(this)),this}Gn(t){return this.Jt.push(t),this}$n(t){return this.hn.push(t),this}jn(...t){return this.Qt.push(...t),this}un(t){if(null==this.Kt)return;const n=this.sn?j(t,this.en):t;this.Kt.set(n)}cn(t){if(0==this.points.length)return!1;const n=G(t,this.points.map(t=>t.Et)),e=this.points[n.index],i=n.i<10?e:null;if(null==i)return null!=this.Kt&&(this.Kt=null,!0);const{Xt:s}=i.St();return s?null!=this.Kt&&(this.Kt=null,!0):this.Kt!=i&&(this.Kt=i,!0)}mn(){const t=this.qt.canvas;return t.addEventListener("mousemove",this.on),t.addEventListener("mousedown",this.ln),document.addEventListener("mouseup",this.an),this}In(){const t=this.qt.canvas;return t.removeEventListener("mousemove",this.on),t.removeEventListener("mousedown",this.ln),document.removeEventListener("mouseup",this.an),this}Rn(){return this._t=!0,this}zn(){return this._t=!1,this}Un(){return this._t=!this._t,this}Hn(t,n){return this.tn=t,this.nn=n,this}Nn(t){return this.en=t,this}Wn(t){return this.in=t,this}Xn(){return this.sn=!0,this}Yn(){return this.sn=!1,this}qn(){return this.sn=!this.sn,this}Qn(){return this.rn=.5,this}Jn(){return this.rn=0,this}Kn(){return this.rn=0==this.rn?.5:0,this}Zn(t){return this.fn=t,this}Bt(){return{...this.fn}}_n(t){return this.wn=t,this}te(){return{...this.wn}}ne(t){return this.dn=t,this}ee(){return{...this.dn}}ie(t){return this.Fn=t,this}se(){return{...this.Fn}}re(t){return this.vn=t,this}he(){return{...this.vn}}}function*at(t){for(let n=0;n<t.length-1;n++)yield[t[n],t[n+1]];yield[t[t.length-1],t[0]]}class ft extends ut{constructor(t,n){super(),this.p1=t,this.p2=n,this.attributes={}}static oe(t){return[...at(t)].map(([t,n])=>new ft(t,n))}static ue(t,n,e){const i=t,s=O(i,B(E(n,t),e));return new ft(i,s)}get Et(){return{p1:y(this.p1.x.valueOf(),this.p1.y.valueOf()),p2:y(this.p2.x.valueOf(),this.p2.y.valueOf())}}St(){return t(this.xt().ee(),this.attributes)}Tt(t){const n=this.St();if(!n.Lt)return this;const e=this.xt().Pt;if(t.save(),t.strokeStyle=n.stroke,1==n.strokeStyle&&t.setLineDash([5,5]),t.lineWidth=n.width,t.beginPath(),t.moveTo(this.Et.p1.x+e,this.Et.p1.y+e),t.lineTo(this.Et.p2.x+e,this.Et.p2.y+e),n.pn){const n=Math.PI/12,i=12,s=T(this.Et.p2,z(this.Et.p1,n,this.Et.p2),i),r=T(this.Et.p2,z(this.Et.p1,-n,this.Et.p2),i);t.lineCap="butt",t.moveTo(s.x+e,s.y+e),t.lineTo(this.Et.p2.x+e,this.Et.p2.y+e),t.lineTo(r.x+e,r.y+e)}if(t.stroke(),t.restore(),""!=n.label){t.save(),t.font='italic 12pt "Computer Modern", serif',t.textAlign="center",t.textBaseline="middle",t.strokeStyle="white",t.lineWidth=2;const e=O(this.Et.p1,S(n.bn,E(this.Et.p2,this.Et.p1))),i=O(e,A(n.gn,n.Vt));t.strokeStyle="white",t.strokeText(n.label,i.x,i.y),t.fillStyle=n.stroke,t.fillText(n.label,i.x,i.y),t.restore()}return this}stroke(t){return this.attributes.stroke=t,this}color(t){return this.stroke(t)}label(t){return this.attributes.label=t,this}bn(t){return this.attributes.bn=Math.min(1,Math.max(0,t)),this}ce(){return this.bn(0)}le(){return this.bn(.1)}ae(){return this.bn(.5)}fe(){return this.bn(.9)}we(){return this.bn(1)}Vt(t){return this.attributes.Vt=t,this}jt(){return this.Vt(3*Math.PI/2)}Gt(){return this.Vt(Math.PI)}$t(){return this.Vt(0)}It(){return this.Vt(Math.PI/2)}gn(t){return this.attributes.gn=t,this}de(){return this.gn(10)}ge(){return this.gn(20)}strokeStyle(t){return this.attributes.strokeStyle=t,this}be(){return this.strokeStyle(1)}width(t){return this.attributes.width=t,this}visible(t=!0){return this.attributes.Lt=t,this}Nt(){return this.visible(!1)}Wt(){return this.visible(this.attributes.Lt)}pe(t=!0){return this.attributes.pn=t,this}}class wt extends ut{constructor(t,n){super(),this.p1=t,this.p2=n,this.attributes={}}St(){return t(this.xt().te(),this.attributes)}Tt(t){if(x(this.p1,this.p2))return this;const n=this.St();if(!n.Lt)return this;const e=this.xt().Pt,i=this.xt().En(),s=this.xt().Sn();if(t.save(),t.strokeStyle=n.stroke,t.lineWidth=n.width,1==n.strokeStyle&&t.setLineDash([5,5]),t.beginPath(),f(this.p1.x,this.p2.x))t.moveTo(this.p1.x+e,e),t.lineTo(this.p1.x+e,s+e);else if(f(this.p1.y,this.p2.y))t.moveTo(e,this.p1.y+e),t.lineTo(i+e,this.p1.y+e);else{const n=(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x),r=this.p1.y-n*this.p1.x,h=-r/n,o=(s-r)/n,u=r,c=n*i+r,l=[];if(g(0,h,i)&&l.push(y(h,0)),g(0,o,i)&&l.push(y(o,s)),w(0,u,s)&&l.push(y(0,u)),w(0,c,s)&&l.push(y(i,c)),l.length>=2){const[n,i]=l;t.moveTo(n.x+e,n.y+e),t.lineTo(i.x+e,i.y+e)}}return t.stroke(),t.restore(),this}stroke(t){return this.attributes.stroke=t,this}color(t){return this.stroke(t)}width(t){return this.attributes.width=t,this}be(){return this.attributes.strokeStyle=1,this}}class dt extends ut{constructor(t,n){super(),this.c=t,this.r=n,this.attributes={},n instanceof ot&&n.subscribe(()=>this.xt().kt())}St(){return t(this.xt().he(),this.attributes)}Tt(t){const n=this.St();if(!n.Lt)return this;const e=this.xt().Pt,i=this.c.x.valueOf()+e,s=this.c.y.valueOf()+e,r=this.r.valueOf()+e;return t.save(),t.strokeStyle=n.stroke,t.fillStyle=n.fill,t.lineWidth=n.width,1==n.strokeStyle&&t.setLineDash([5,5]),t.beginPath(),t.arc(i,s,r,n.yn,n.arcTo),t.fill(),t.stroke(),t.restore(),this}stroke(t){return this.attributes.stroke=t,this}color(t){return this.stroke(t)}fill(t){return this.attributes.fill=t,this}be(){return this.attributes.strokeStyle=1,this}visible(t=!0){return this.attributes.Lt=t,this}Nt(){return this.visible(!1)}Wt(){return this.visible(!this.attributes.Lt)}yn(t){return this.attributes.yn=t,this}arcTo(t){return this.attributes.arcTo=t,this}arc(t,n){return this.yn(t).arcTo(n)}width(t){return this.attributes.width=t,this}}function gt(t){return document.querySelector(t)}const bt=new ct(40,120).label("A").color("#FF4136"),pt=new ct(120,40).label("B").size(0).color("#FF4136"),Ft=new ct(80,160).label("C").color("#0074D9"),vt=new ct(160,80).label("D").size(0).color("#0074D9"),yt=new ct(120,160).label("E").color("#2ECC40"),mt=new ct(200,80).label("F").size(0).color("#2ECC40"),Mt=new ct(320,40).label("P").color("#F012BE"),Dt=new ct(240,120).label("Q").size(0).color("#F012BE"),xt=new ct(400,160).label("R").color("#7FDBFF"),At=new ct(320,80).label("S").size(0).color("#7FDBFF"),Ot=new ct(440,120).label("T").color("#FF851B"),Ct=new ct(480,80).label("U").size(0).color("#FF851B"),kt=[bt,pt,Ft,vt,yt,mt,Mt,Dt,xt,At,Ot,Ct];kt.forEach(t=>{t.lock()});const Et=[new ft(bt,pt).color("#FF4136"),new ft(Ft,vt).color("#0074D9"),new ft(yt,mt).color("#2ECC40"),new ft(Mt,Dt).color("#F012BE"),new ft(xt,At).color("#7FDBFF"),new ft(Ot,Ct).color("#FF851B")];Et.forEach(t=>{t.pe()});const St=gt("figure#directed-segments"),Bt=document.createElement("canvas"),Tt=Bt.getContext("2d");St.insertBefore(Bt,St.firstElementChild);new lt(Tt).kn(560,200).add(...kt,...Et).zn().kt();const Lt=new ct(80,120).color("#0074D9"),Pt=new ct(120,70).size(0),Vt=new ft(Lt,Pt).pe().color("#0074D9"),jt=new ct(100,100).label("O").color("#FF4136"),Gt=new ct(0,0).lock().size(0).label("X").color("#FF4136"),$t=new ft(jt,Gt).pe().color("#FF4136");function It(){const t=tt.st.sub(Pt,Lt);Gt.set(tt.st.add(jt,t))}const Rt=gt("figure#vector-vs-directed-segment"),zt=Rt.firstElementChild.children[0],Ut=Rt.firstElementChild.children[1],Ht=new lt(zt.getContext("2d")).kn(200,200).Yn().zn().add(Vt,Lt,Pt),Nt=new lt(Ut.getContext("2d")).kn(200,200).Yn().zn().add($t,jt,Gt);function Wt(t,n,e=!1){const i=new ct(100,100).lock(),s=new ct(160,90).size(0).color("#0074D9"),r=new ct(50,20).size(0).color("#FF4136"),h=new ft(i,s).pe().color("#0074D9"),o=new ft(i,r).pe().color("#FF4136"),u=new ct(100,100).label("A"),c=new ct(0,0).lock().label("B"),l=new ct(0,0).lock().label("C"),a=new ct(0,0).lock().label("D"),f=new ft(u,c).color("#0074D9").pe(),w=new ft(c,l).color("#FF4136").pe(),d=new ft(u,a).color("#FF4136").pe(),g=new ft(a,l).color("#0074D9").pe(),b=new ft(u,l).color("#2ECC40").pe().width(2);function p(){const t=tt.st.sub(s,i),n=tt.st.sub(r,i);c.set(tt.st.add(u,t)),l.set(tt.st.add(c,n)),a.set(tt.st.add(u,n))}const F=gt(t),v=F.firstElementChild.children[0],y=F.firstElementChild.children[1],m=new lt(v.getContext("2d")).kn(200,200).Yn().zn().add(h,o,s,r),M=new lt(y.getContext("2d")).kn(200,200).Yn().zn();M.add(f,w),n&&M.add(b),e&&M.add(d,g,a),M.add(u,c,l),p(),m.$n(function(){p(),M.clear().Vn()}).kt(),M.$n(function(){p(),m.clear().Vn()}).kt()}It(),Ht.$n(function(){It(),Nt.clear().Vn()}).kt(),Nt.$n(function(){It(),Ht.clear().Vn()}).kt();const Xt=new ct(100,100).lock(),Yt=new ct(160,90).size(0).color("#0074D9"),qt=new ft(Xt,Yt).pe().color("#0074D9"),Qt=new ct(100,100).lock(),Jt=new ct(0,0).lock().color("#FF4136").size(0),Kt=new ft(Qt,Jt).color("#FF4136").pe();function Zt(){const t=tt.st.sub(Yt,Xt),n=tt.st.g(t),e=tt.st.add(Qt,n);Jt.set(e)}const _t=gt("#inverse-vector"),tn=_t.firstElementChild.children[0],nn=_t.firstElementChild.children[1],en=new lt(tn.getContext("2d")).kn(200,200).Yn().zn().add(qt,Xt,Yt),sn=new lt(nn.getContext("2d")).kn(200,200).Yn().zn().add(Kt,Qt,Jt);Zt(),en.$n(function(){Zt(),sn.clear().Vn()}).kt(),sn.$n(function(){Zt(),en.clear().Vn()}).kt();const rn=new ot(1.5);rn.wt(gt("#linear-combination-two-vectors-k1"));const hn=new ot(1.5);hn.wt(gt("#linear-combination-two-vectors-k2"));const on=new ct(150,150).lock(),un=new ct(150,rn.vt(30).g().add(150)).lock().size(0),cn=new ct(hn.vt(20).g().add(150),150).lock().size(0),ln=new ft(on,un).pe().color("#FF4136"),an=new ft(on,cn).pe().color("#0074D9");const fn=gt("#linear-combination-two-vectors canvas").getContext("2d"),wn=(new lt(fn).kn(300,300).add(on,un,cn,ln,an).Gn(function(){const t=new ct(tt.st.add(on.Et,tt.st.sub(un.Et,on.Et),tt.st.sub(cn.Et,on.Et)));return[new ft(on,t).pe().color("#2ECC40")]}).Yn().zn().Vn(),new ot(1));wn.wt(gt("#linear-combination-two-vectors-parallel-k1"));const dn=new ot(1);dn.wt(gt("#linear-combination-two-vectors-parallel-k2"));const gn=new ct(150,150).lock(),bn=new ct(150,wn.vt(30).g().add(150)).lock().size(0),pn=new ct(150,dn.vt(20).g().add(150)).lock().size(0),Fn=new ft(gn,bn).pe().color("#FF4136"),vn=new ft(gn,pn).pe().color("#0074D9");const yn=gt("#linear-combination-two-vectors-parallel canvas").getContext("2d");new lt(yn).kn(300,300).add(gn,bn,pn,Fn,vn).Gn(function(){const t=new ct(tt.st.add(gn.Et,tt.st.sub(bn.Et,gn.Et),tt.st.sub(pn.Et,gn.Et)));return[new ft(gn,t).pe().color("#2ECC40").width(2)]}).Yn().zn().Vn();gt("#linear-combination-two-vectors-parallel-goto").addEventListener("click",()=>{wn.set(-2),dn.set(3)});const mn=new ct(300,200),Mn=new ct(320,255).color("#F012BE").size(0),Dn=new ct(354,210).color("#01FF70").size(0),xn=new ft(mn,Mn).pe().width(2).color("#F012BE"),An=new ft(mn,Dn).pe().width(2).color("#01FF70");const On=gt("#coordinates-net canvas").getContext("2d"),Cn=(new lt(On).kn(600,400).add(xn,An,mn,Mn,Dn).Gn(function(){const t=[],n=[],e=tt.st.sub(Mn,mn),i=tt.st.sub(Dn,mn),s=tt.st.s(.5,.5);for(let r=-100;r<100;r++){const h=tt.st.add(mn.Et,tt.st.p(r,e),s),o=tt.st.add(h,i),u=tt.st.add(mn.Et,tt.st.p(r,i),s),c=tt.st.add(u,e);t.push(new wt(h,o)),n.push(new wt(u,c))}return[...t,...n].map(t=>t.width(.5).color("#0074D9AA"))}).Yn().zn().Vn(),new ct(300,200).lock()),kn=new ct(320,200).color("#F012BE").size(0).lock(),En=new ct(300,180).color("#01FF70").size(0).lock(),Sn=new ft(Cn,kn).pe().width(2).color("#F012BE"),Bn=new ft(Cn,En).pe().width(2).color("#01FF70");const Tn=gt("#cartesian-net canvas").getContext("2d"),Ln=(new lt(Tn).kn(600,400).add(Sn,Bn,Cn,kn,En).Gn(function(){const t=[],n=[],e=tt.st.sub(kn,Cn),i=tt.st.sub(En,Cn),s=tt.st.s(.5,.5);for(let r=-100;r<100;r++){const h=tt.st.add(Cn.Et,tt.st.p(r,e),s),o=tt.st.add(h,i),u=tt.st.add(Cn.Et,tt.st.p(r,i),s),c=tt.st.add(u,e);t.push(new wt(h,o)),n.push(new wt(u,c))}return[...t,...n].map(t=>t.width(.5).color("#0074D9AA"))}).Yn().zn().Vn(),new ct(300,300).lock()),Pn=new ct(320,300).lock().size(0),Vn=new ct(300,320).lock().size(0),jn=new wt(Ln,Pn),Gn=new wt(Ln,Vn),$n=new ct(tt.st.add(Ln.Et,tt.st.o(240,-Math.PI/6))).color("#0074D9").size(0),In=new ft(Ln,$n).pe().width(2).color("#0074D9");const Rn=gt("#polar canvas").getContext("2d"),zn=(new lt(Rn).kn(600,600).add(Ln,jn,Gn,In,$n).Gn(function(){const t=tt.st.sub($n,Ln),n=tt.st.D(t),e=Math.atan2(t.y,t.x),i=new dt(Ln,60).arc(e,0).width(3).color("#0074D9"),s=[40,80,120,160,200,240,280,320,360,400,440].map(t=>new dt(Ln,t).color("#11111144"));return function(t,n){const e=(n/40).toFixed(1),i=(180*-t/Math.PI).toFixed(1);gt("#polar-vector-katex").innerText=`(${i}°, ${e})`}(e,n),[...s,i]}).Yn().zn().Vn().Qn(),new ct(100,300)),Un=new ct(360,100).size(0).color("#FF4136"),Hn=new ct(500,300).size(0).color("#0074D9"),Nn=new ft(zn,Un).pe().color("#FF4136").label("u"),Wn=new ft(zn,Hn).pe().color("#0074D9").label("v"),Xn=gt("#scalar-product > canvas").getContext("2d"),Yn=(new lt(Xn).kn(600,400).add(Nn,Wn,zn,Un,Hn).$n(()=>{qn()}).Vn(),gt("#scalar-product-result"));function qn(){const t=tt.st.sub(Un,zn),n=tt.st.sub(Hn,zn),e=tt.st.M(zn,Un),i=tt.st.M(zn,Hn),s=tt.st.A(t),r=tt.st.A(n)-s,h=Math.cos(r),o=e*i*h;Yn.textContent=`${e.toFixed(2)} ⋅ ${i.toFixed(2)} ⋅ ${h.toFixed(4)} = ${o.toFixed(0)}.`}qn();const Qn=new ct(100,300),Jn=new ct(360,100).size(0).color("#FF4136"),Kn=new ct(500,300).size(0).color("#0074D9"),Zn=new ct(-10,-10).size(0).lock(),_n=new ft(Qn,Jn).pe().color("#FF4136").label("u").de().we().jt(),te=new wt(Qn,Kn).color("#0074D9").be().width(.5),ne=new ft(Qn,Kn).pe().color("#0074D9").label("v").de().we().jt(),ee=new ft(Qn,Zn).pe().color("#2ECC40").width(3).label("w").we().It().de();function ie(){const t=tt.st.sub(Jn,Qn),n=tt.st.sub(Kn,Qn),e=tt.st.D(n),i=tt.st.m(t,n)/e/e,s=tt.st.p(i,n);Zn.set(tt.st.add(Qn,s))}ie();const se=gt("#scalar-projection > canvas").getContext("2d"),re=(new lt(se).kn(600,400).add(ee,te,ne,_n,Qn,Kn,Jn).Vn().$n(ie),new ct(100,300)),he=new ct(160,100).size(0).color("#FF4136"),oe=new ct(440,300).size(0).color("#0074D9"),ue=new ft(re,he).pe().color("#FF4136").label("u").width(2),ce=new ft(re,oe).pe().color("#0074D9").label("v").width(2),le=new ct(-10,-10),ae=new class extends ut{constructor(t){super(),this.points=t,this.attributes={}}set(t){return this.points=t,this}St(){return t(this.xt().se(),this.attributes)}Tt(t){const n=this.St(),e=this.xt().Pt;t.save(),t.fillStyle=n.fill;const[i,...s]=this.points;t.moveTo(i.x+e,i.y+e);for(const n of s)t.lineTo(n.x+e,n.y+e);return t.lineTo(i.x+e,i.y+e),t.fill(),t.restore(),this}fill(t){return this.attributes.fill=t,this}fillStyle(t){return this.attributes.fillStyle=t,this}}([re,he,le,oe]);function fe(){const t=tt.st.sub(he,re),n=tt.st.sub(oe,re);le.set(tt.st.add(re,t,n))}fe();const we=gt("#parallelogram > canvas").getContext("2d"),de=(new lt(we).kn(600,400).add(ae,ue,ce,re,he,oe).$n(fe).Vn(),new ct(150,150)),ge=new ct(160,100).size(0).color("#FF4136"),be=new ct(-10,-10).size(0).color("#0074D9").lock(),pe=new ft(de,ge).pe().color("#FF4136").width(2),Fe=new ft(de,be).pe().color("#0074D9");function ve(){const t=tt.st.sub(ge,de),n=tt.st.S(t);be.set(tt.st.add(de,n))}ve();const ye=gt("#perp-prod > canvas").getContext("2d");new lt(ye).kn(300,300).add(pe,Fe,de,ge,be).$n(ve).Vn();Wt("figure#vector-addition",!1),Wt("figure#vector-addition-with-result",!0),Wt("figure#vector-addition-parallelogram",!0,!0)}();
